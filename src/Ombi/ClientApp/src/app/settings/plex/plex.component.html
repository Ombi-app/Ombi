<settings-menu></settings-menu>
<div class="small-middle-container" *ngIf="settings">
    <fieldset style="width:100%;">
        <legend>Plex Configuration</legend>
        <div class="row">
            <div class="col-md-6 col-12">
                <div class="md-form-field">
                    <mat-slide-toggle [(ngModel)]="settings.enable" [checked]="settings.enable">Enable
                    </mat-slide-toggle>
                </div>
                <div class="md-form-field">
                    <mat-slide-toggle [(ngModel)]="settings.enableWatchlistImport" [checked]="settings.enableWatchlistImport">Enable User Watchlist Requests
                    </mat-slide-toggle>
                    <p>When a Plex User adds something to their watchlist in Plex, it will turn up in Ombi as a Request if enabled. This <b>only</b> applies to users that are logging in with their Plex Account</p>
                    <p>Request limits if set are all still applied etc.</p>
                </div>
                <div class="md-form-field">
                    <mat-slide-toggle [(ngModel)]="advanced">Advanced</mat-slide-toggle>
                </div>
 
            </div>
            <div class="col-md-6 col-12">
                <div class="md-form-field align-right">
                    <button (click)="openWatchlistUserLog()" type="button" class="mat-focus-indicator mat-flat-button mat-button-base mat-accent">Watchlist User Errors</button>
                </div>
 
            </div>
        </div>

        <hr>

        <div class="row">
            <mat-tab-group #tabGroup [selectedIndex]="selected.value" (selectedTabChange)="addTab($event)"
                (selectedIndexChange)="selected.setValue($event)" animationDuration="0ms" style="width:100%;">
                <mat-tab *ngFor="let server of settings.servers" [label]="server.name">

                    <div class="col-md-6 col-6 col-sm-6 align-right">
                        <button type="button" (click)="removeServer(server)"
                            class="mat-focus-indicator mat-flat-button mat-button-base mat-warn">Remove Server</button>
                    </div>
                    <br />
                    <br />

                    <settings-plex-form
                        [server]="server"
                        (loadLibraries)="loadLibraries(server)"
                        (loadServers)="requestServers()"
                        (test)="testPlex(server)"
                        (runSync)="runSync($event)"
                        (selectServer)="selectServer($event, server)"
                        >
                    </settings-plex-form>

                </mat-tab>
                <mat-tab label="" disabled=true> </mat-tab>
                <mat-tab label="Add Server" position=100> </mat-tab>

            </mat-tab-group>
            <div class="col-md-2">
                <div class="form-group">
                    <div>
                        <button mat-raised-button (click)="save()" type="submit" id="save"
                            class="mat-focus-indicator mat-raised-button mat-button-base mat-accent">Submit</button>
                    </div>
                </div>
            </div>
        </div>
    </fieldset>
</div>
<!--(){{settings|json}}-->
